<!DOCTYPE html><html><head><link rel="stylesheet" type="text/css" href="/assets/lib/bootstrap/4.3.1/bootstrap.min.css"><link rel="stylesheet" type="text/css" href="/assets/lib/ldui/ldui.min.css"><style type="text/css">html,
body {
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
}
</style></head><body><div class="w-1024 mx-auto rwd typeset heading-contrast"><div class="text-center py-4"><h1>signimg</h1><p>inject signed information about user, createdtime and license, etc.</p></div><div class="my-4 py-4 rounded border shadow-sm"><div class="row my-4"><div class="col-md text-center"><label>Original Image</label><img class="d-block mx-auto" id="img1" src="/assets/img/spinner.png"><a class="d-block mx-auto" id="link1" href="/assets/img/spinner.png" download="spinner.png">Download</a></div><div class="col-md text-center"><label>Signed Image</label><img class="d-block mx-auto" id="img2" src="/assets/img/spinner.png"><a class="d-block mx-auto" id="link2" download="signed-spinner.png">Download</a></div><div class="col-md text-center"><div class="vertical-center"><div class="w-100"><label>Verify</label><div class="mx-auto" style="width:200px"><div class="aspect-ratio ratio-1by1"><div class="vertical-center"><div class="w-100 text-center" id="verifyResult" style="word-break:break-all"></div></div></div></div><div class="btn btn-upload btn-outline-dark d-block mx-4">Upload <input type="file"></div></div></div></div></div></div></div><script type="text/javascript" src="https://bundle.run/buffer@5.6.0"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/crc-32/1.2.0/crc32.min.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/blueimp-md5/2.14.0/js/md5.min.js"></script><script type="text/javascript" src="/assets/lib/ldui/ldui.min.js"></script><script type="text/javascript" src="/assets/lib/signimg/file.min.js"></script><script>// Generated by LiveScript 1.3.1
var Buffer, lc, ldf;
Buffer = buffer.Buffer;
lc = {};
ldFile.fromURL("/assets/img/spinner.png").then(function(it){
  return it.file.arrayBuffer();
}).then(function(it){
  return Buffer.from(it);
}).then(function(it){
  var payload;
  lc.img = it;
  payload = {
    md5: md5(it)
  };
  return ld$.fetch('/d/sign', {
    method: 'POST'
  }, {
    json: payload,
    type: 'json'
  });
}).then(function(it){
  return signimg.inject(lc.img, it.msg, it.sig);
}).then(function(it){
  return URL.createObjectURL(new Blob([it]));
}).then(function(it){
  link2.setAttribute('href', it);
  link2.setAttribute('download', 'out.png');
  return img2.setAttribute('src', it);
});
ldf = new ldFile({
  root: 'input',
  type: 'arraybuffer'
});
ldf.on('load', function(it){
  lc.img = Buffer.from(it[0].result);
  return signimg.parse(lc.img).then(function(data){
    lc.data = data;
    return ld$.fetch('/d/verify', {
      method: 'POST'
    }, {
      json: data,
      type: 'json'
    });
  }).then(function(it){
    return verifyResult.innerHTML = "<div class=\"mb-4 text-" + (it ? 'success' : 'danger') + "\">\n  following message are <br>" + (it ? "" : "not") + " correctly signed:\n</div>\n<div class=\"text-muted text-sm\">\n" + JSON.stringify(lc.data.msg || '') + "\n</div>";
  });
});</script></body></html>